<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magical Door with Responsive GIF</title>
    <style>
        /* Container for the GIF */
        #door-container {
            width: 50%;
            margin: 20px auto;
            transition: transform 2s ease; /* Smooth opening effect */
            transform-origin: left center;
        }

        /* Open state for the door (left slide) */
        .open {
            transform: translateX(-100%); /* Moves the GIF to the left */
        }

        /* Magic text styling */
        #magic-text {
            display: none;
            text-align: center;
            font-family: 'serif';
            font-size: 24px;
            color: #6A0DAD;
            margin-top: 20px;
        }

        /* Status indicator */
        #status {
            display: block;
            text-align: center;
            margin: 20px auto;
            font-size: 18px;
            color: green;
            font-weight: bold;
        }

        /* Display for recognized text */
        #recognized-text {
            text-align: center;
            margin-top: 10px;
            font-size: 16px;
            color: #333;
        }

        /* Responsive styling for smaller screens */
        @media (max-width: 768px) {
            #door-container {
                width: 80%; /* Adjusts width to 80% on smaller screens */
            }
            #magic-text {
                font-size: 18px; /* Reduces font size for smaller screens */
            }
            #status {
                font-size: 16px; /* Adjusts the status text for readability */
            }
        }

        /* Additional adjustments for very small screens */
        @media (max-width: 480px) {
            #door-container {
                width: 90%; /* Further adjusts for very small screens */
            }
            #magic-text {
                font-size: 16px;
            }
            #status {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>

<!-- Door Container with Embedded GIF -->
<div id="door-container">
    <div class="tenor-gif-embed" data-postid="8715744322925314600" data-share-method="host" data-aspect-ratio="0.544177" data-width="100%">
        <a href="https://tenor.com/view/fat-lady-harry-potter-gif-8715744322925314600">Fat Lady Harry Potter GIF</a> from
        <a href="https://tenor.com/search/fat+lady+harry+potter-gifs">Fat Lady Harry Potter GIFs</a>
    </div>
</div>
<script type="text/javascript" async src="https://tenor.com/embed.js"></script>

<!-- Status Display -->
<div id="status">Listening for "Alohomora"... ðŸ”Š</div>

<!-- Recognized Text Display -->
<div id="recognized-text"></div>

<!-- Magic Text to Show after Door Opens -->
<div id="magic-text">Welcome to the Magical World!</div>

<script>
    // Check if the browser supports the Web Speech API
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
        alert("Your browser does not support speech recognition. Please use Chrome or another supported browser.");
    }

    // Initialize Speech Recognition
    const recognition = new SpeechRecognition();
    recognition.lang = 'en-US';
    recognition.interimResults = false;
    recognition.continuous = true; // Keeps listening continuously

    // Function to open the GIF door and display magic text
    function openDoor() {
        const doorContainer = document.getElementById('door-container');
        const magicText = document.getElementById('magic-text');

        // Add the open class to simulate door sliding left
        doorContainer.classList.add('open');

        // Display the magic text after the door opens
        setTimeout(() => {
            magicText.style.display = 'block';
        }, 2000); // Delay matches the door opening animation time
    }

    // Start continuous voice recognition
    function startListening() {
        recognition.start();
    }

    // Event listener for speech recognition results
    recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript.trim().toLowerCase();

        // Display the recognized text on the page
        document.getElementById('recognized-text').innerText = `You said: "${transcript}"`;

        if (transcript === "alohomora") {
            openDoor();
            recognition.stop(); // Stop listening once the door is open
            document.getElementById('status').innerText = "Access Granted!";
        }
    };

    // Restart recognition when it stops unexpectedly
    recognition.onend = () => {
        if (!document.getElementById('door-container').classList.contains('open')) {
            recognition.start(); // Restart listening if the door hasnâ€™t opened
        }
    };

    // Error handling
    recognition.onerror = (event) => {
        console.error("Speech recognition error:", event.error);
    };

    // Start the speech recognition automatically when the page loads
    window.onload = startListening;
</script>

</body>
</html>